# Ralph Loop 提示词模板 - 测试修复

## 任务目标

自动修复所有失败的测试，直到全部通过。

## 执行流程

每次迭代：

1. **运行测试** - 执行完整测试套件
2. **分析失败** - 识别失败原因
3. **修复问题** - 修改代码或测试
4. **验证修复** - 重新运行相关测试
5. **提交修复** - 使用 `fix(scope): description` 格式提交

## 完成标准

当满足以下条件时输出 `<promise>ALL_GREEN</promise>`：

- [ ] 所有测试通过
- [ ] 无跳过的测试（除非有明确原因）
- [ ] 修复已提交

## 修复策略

### 优先级排序
1. 编译/语法错误
2. 类型错误
3. 断言失败
4. 超时问题

### 修复原则
- 修复代码 bug，而不是修改测试让它通过
- 如果测试本身有问题，需要说明原因
- 每次只修复一个测试文件

## 卡住时的处理

如果同一个测试连续 3 次修复失败：

1. 记录测试名称和失败原因
2. 标记为需要人工审查
3. 跳过该测试继续其他修复
4. 如果所有可修复的都完成，输出 `<promise>PARTIAL_GREEN</promise>`

## 输出格式

```markdown
## 测试修复迭代 #N

### 测试状态
- 总数: X
- 通过: Y
- 失败: Z

### 本次修复
- 文件: [文件路径]
- 问题: [问题描述]
- 修复: [修复方案]

### 验证结果
[测试输出摘要]

### 下一步
[继续修复/完成信号]
```
