# PM 角色方法论参考

> 本文件是 /cc-best:pm 命令的知识参考，由 requirement-validator agent 预加载。
> 包含：自主分析核心原则、决策框架、需求文档模板、决策置信度说明、决策原则。

---

## 自主分析核心原则

> **PM 不是"猜"用户要什么，而是基于项目上下文"推断"合理方案**

### 决策依据来源（按优先级）

| 优先级 | 来源         | 说明                                       |
| ------ | ------------ | ------------------------------------------ |
| 1      | 用户明确描述 | 用户在需求中明确说明的内容                 |
| 2      | 项目现有实现 | 项目中已有的类似功能、模式                 |
| 3      | 架构约束     | `memory-bank/architecture.md` 中的架构决策 |
| 4      | 技术栈约定   | `memory-bank/tech-stack.md` 中的技术选型   |
| 5      | 行业惯例     | 该类功能的常见实现方式                     |
| 6      | MVP 原则     | 不确定时选择最小可行方案                   |

### 决策框架

```
面对模糊需求时：

1. 项目已有类似功能？
   └─ 是 → 参考现有实现模式
   └─ 否 → 继续

2. 架构/技术栈有约束？
   └─ 是 → 遵循现有约定
   └─ 否 → 继续

3. 有行业标准做法？
   └─ 是 → 采用行业惯例
   └─ 否 → 继续

4. 都不确定？
   └─ 采用 MVP 最小方案
   └─ 明确标注为"待确认"
```

### 示例：一句话需求展开

**用户输入**: "加个登录功能"

**PM 分析过程**:

1. 读取 `memory-bank/tech-stack.md` -> 项目使用 JWT
2. 搜索现有代码 -> 发现已有 `auth/` 模块
3. 读取 `memory-bank/architecture.md` -> 前后端分离架构
4. 推断决策：
   - 登录方式：用户名密码（MVP，最常见）
   - 认证机制：JWT（项目已有）
   - 是否需要注册：是（登录通常配套）
   - 第三方登录：暂不实现（MVP 原则）

---

## 需求文档模板 (REQ-XXX.md)

```markdown
# REQ-XXX: [需求名称]

## 元信息

- **编号**: REQ-XXX
- **状态**: draft
- **创建日期**: YYYY-MM-DD
- **原始需求**: [用户的原始描述]

## 背景

为什么要做这个功能？

## User Stories（按优先级排列）

> **关键原则**: 每个 User Story 必须**独立可测试**，P1 = MVP

### US-1: [标题] (P1 - MVP) 🎯

**作为** [角色]，**我希望** [功能]，**以便** [价值]

**价值说明**: [为什么是最高优先级]

**独立测试**: [如何独立验证这个 Story，不依赖其他 Story]

**验收场景**:

- Given [前置条件], When [用户动作], Then [预期结果]
- Given [前置条件], When [用户动作], Then [预期结果]

### US-2: [标题] (P2)

**作为** [角色]，**我希望** [功能]，**以便** [价值]

**价值说明**: [为什么是这个优先级]

**独立测试**: [如何独立验证]

**验收场景**:

- Given ..., When ..., Then ...

### US-3: [标题] (P3)

...

## 功能范围

### 包含

- [ ] 功能点1
- [ ] 功能点2

### 不包含（明确排除）

- 排除项1（原因）
- 排除项2（原因）

## 边界情况

- 当 [边界条件1]，系统应 [处理方式]
- 当 [边界条件2]，系统应 [处理方式]

## 决策记录

> 以下决策基于项目上下文推断，Lead 评审时请确认

| 决策点  | 选择   | 依据       | 置信度   |
| ------- | ------ | ---------- | -------- |
| [决策1] | [选择] | [依据来源] | 高/中/低 |
| [决策2] | [选择] | [依据来源] | 高/中/低 |

## 待澄清项（≤3 个）

> **规则**: 最多 3 个待澄清项，其他用合理默认值

| #   | 问题   | 上下文     | 影响         | 建议答案     |
| --- | ------ | ---------- | ------------ | ------------ |
| Q1  | [问题] | [相关需求] | 范围/安全/UX | A: / B: / C: |
| Q2  | [问题] | [相关需求] | 范围/安全/UX | A: / B: / C: |

## 需求质量自检

> **理念**: Checklist = 需求的单元测试（检查需求写得好不好，不是检查代码）

### 完整性

- [ ] 每个 User Story 独立可测试？
- [ ] 边界情况已识别？
- [ ] 错误处理已定义？

### 清晰度

- [ ] 无模糊词汇（"快速"/"大量"/"简单"等）？
- [ ] 验收标准可客观测量？
- [ ] 术语定义清晰？

### 一致性

- [ ] User Stories 之间无冲突？
- [ ] 与项目原则（Constitution）一致？
- [ ] 待澄清项 ≤ 3 个？

## 依赖

- 依赖 REQ-XXX: [说明]

## 关联设计

- (待 /cc-best:lead 创建后补充)
```

---

## 决策置信度说明

| 置信度 | 定义                                         | 处理方式                    |
| ------ | -------------------------------------------- | --------------------------- |
| **高** | 有明确依据（用户说明/项目现有实现/架构约束） | 直接执行                    |
| **中** | 基于行业惯例或合理推断                       | 执行，Lead 评审时关注       |
| **低** | 无明确依据，采用 MVP 原则                    | 标注为"待确认"，Lead 可调整 |

---

## 决策原则

| 场景           | 决策                           |
| -------------- | ------------------------------ |
| 功能范围不清   | 先定义最小可用版本，标注扩展点 |
| 多个需求冲突   | 按价值/成本比排序              |
| 技术可行性存疑 | 标注风险，交给 Lead 评估       |
| 完全无依据     | 采用 MVP，置信度标"低"         |
